<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Truth Engine Mobile</title>
<style>
body{font-family:Arial,sans-serif;margin:12px;max-width:980px}
h1{font-size:18px;margin:0 0 8px 0}
.small{font-size:12px;color:#444}
.row{display:flex;flex-direction:column;gap:12px;margin-top:12px}
.card{border:1px solid #d0d0d0;border-radius:14px;padding:12px;background:#fff}
label{display:block;margin:10px 0 6px;font-weight:700;font-size:13px}
input[type=text],textarea,select{width:100%;box-sizing:border-box;padding:10px;border:1px solid #bdbdbd;border-radius:12px}
textarea{min-height:70px;resize:vertical}
button{padding:10px 12px;border:1px solid #444;border-radius:14px;background:#fff;cursor:pointer;font-size:14px}
button:disabled{opacity:.5;cursor:not-allowed}
.btnrow{display:flex;gap:8px;flex-wrap:wrap}
canvas{width:100%;height:auto;border-radius:12px;background:#fafafa}
video{width:100%;border-radius:12px;background:#000}
</style>
</head>

<body>
<h1>Truth Engine Mobile</h1>
<div class="small">Local only. No network calls.</div>

<button id="startCamBtn">Start Camera</button>
<button id="stopCamBtn" disabled>Stop Camera</button>

<video id="camView" muted playsinline></video>

<script>
const camView = document.getElementById("camView");
const startBtn = document.getElementById("startCamBtn");
const stopBtn = document.getElementById("stopCamBtn");
let camStream = null;

startBtn.addEventListener("click", async () => {
  try {
    camStream = await navigator.mediaDevices.getUserMedia({
      video: { facingMode: { exact: "environment" } },
      audio: false
    });
  } catch {
    camStream = await navigator.mediaDevices.getUserMedia({
      video: { facingMode: "environment" },
      audio: false
    });
  }

  camView.srcObject = camStream;
  camView.style.display = "block";
  await camView.play();

  startBtn.disabled = true;
  stopBtn.disabled = false;
});

stopBtn.addEventListener("click", () => {
  if (camStream) {
    camStream.getTracks().forEach(t => t.stop());
    camStream = null;
  }
  camView.srcObject = null;
  startBtn.disabled = false;
  stopBtn.disabled = true;
});
</script>
</body>
</html>
